<%- include("partials/header") -%>
<div class="container recipe-page-container">
  <h1 class="recipe-page-title text-center">Recipes</h1>
  <div class="container recipe-page-card-container">
    <% recipes.forEach(recipe => { %>

    <div class="card flex-md-row">
      <div class="card-body d-flex flex-column align-items-start">
        <h3 class="mb-0">
          <a class="text-dark" href="#"><%= recipe.title %></a>
        </h3>
        <div class="mb-1 text-muted">
          <i class="far fa-clock pr-2"></i><%= recipe.date %>
          <br />
          <small class="text-muted"><%= recipe.submittedBy %></small>
        </div>
        <p class="card-text mt-3 mb-auto">"<%= recipe.content %>"</p>
        <a href="#" class="text-danger">Read more</a>

        <div class="d-flex">
          <p class="copy-msg">Link Copied!</p>
          <i
            class="fas fa-link p-1 mt-3 mr-1 copy-link"
            data-placement="top"
            title="Copy Link"
          ></i>

          <i
            class="fas fa-thumbs-up p-1 mt-3"
            data-placement="top"
            title="like"
          ></i>
        </div>
      </div>

      <img class="card-img-right" src="<%= recipe.img %>" alt="recipe image" />
    </div>

    <% }) %>
  </div>
</div>

<script>
  //Copy Link on Click
  const copiedLinks = document.querySelectorAll(".copy-link");
  const copiedMsgs = document.querySelectorAll(".copy-msg");
  const links = Array.from(copiedLinks);
  const msgs = Array.from(copiedMsgs);
  links.forEach((link) => {
    link.addEventListener("click", (e) => {
      window.navigator.clipboard.writeText(window.location.href);
      console.log(link.previousElementSibling);
      link.previousElementSibling.style.display = "block";
      setTimeout(() => {
        link.previousElementSibling.style.display = "none";
      }, 2000);
    });
  });
</script>
