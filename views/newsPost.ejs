
<!-- TODO: Change css to "news"-->

<!-- TODO: edit image css -->
<%- include("partials/header", {auth}) -%>

 <div class="news-page-container d-flex flex-column align-items-center">

    <div class="d-flex flex-column align-items-center justify-content-center">

      <!-- Post Content Column -->
      <div class="d-flex flex-column ml-auto">

        <!-- Title -->
        <h1 class="mt-4 mb-1 "><%= title %></h1>

        <!-- Author -->
        <p class="lead mb-0">
          by
          <a href="/story" class="eric-name"><span style="color:hsl(7, 60%, 54%)";>Eric Pearson</span></a>
        </p>

        <hr>

        <!-- Date/Time -->
       

        <div class="news-page-social-icons d-flex">
           
          <p class="copy-msg">Link Copied!</p>
          <p class="text-muted"><%= date %></p>
          

          <!-- Edit Button -->
        <% if(auth === true) { %>
         
        <a class="btn btn-dark text-warning font-weight-bold h-25 ml-4 mb-4 mr-3 mt-auto" href="/news/edit/<%= id %>">Edit Post</a>

        <!-- Delete Form / Button -->
          <form
            id="news-delete-form"
            method="POST"
            action="/news/delete/<%= id %>"
          >
          <button class="btn btn-light border-0 text-danger font-weight-bold" type="submit" onclick="return confirm('Are you sure you want to delete this post?')">Delete</button>
          </form>
       
        <% } else { %>
           <i
          class="fas fa-link copy-link"
          data-placement="top"
          title="Copy Link"
          ></i>
          <% } %>
 
        </div>
       
       
        <!-- Post Text / Images -->
        <div>
        <p class="lead news-page-content"><%= content1 %></p>
<div class="news-img">
        <img class="news-page-image" src="/img/<%= images[0].filename %>" alt="news">
</div>
        <p class="lead news-page-content"><%= content2 %></p>

        
         <% if(images.length > 1) { %>
<div class="news-img">
      
        <img class="news-page-image" src="/img/<%= images[1].filename %>" alt="news"/>
     </div>
    <% } %>
       
        
        <p class="lead news-page-content"><%= content3 %></p>

         <% if(images.length > 2) { %>
       
      <div class="container">
<div class="news-img">

        <img class="news-page-image" src="/img/<%= images[2].filename %>" alt="" />
        </div>
      </div>
      <% } %>
      </div>

        

        <!-- TODO: Comments Form -->
        <!-- <div class="card my-4">
          <h5 class="card-header">Leave a Comment:</h5>
          <div class="card-body">
            <form>
              <div class="form-group">
                <textarea class="form-control" rows="3"></textarea>
              </div>
              <button type="submit" class="btn btn-primary">Submit</button>
            </form>
          </div>
        </div> -->

        <!-- Single Comment -->
        <!-- <div class="media mb-4">
          <img class="d-flex mr-3 rounded-circle" src="http://placehold.it/50x50" alt="">
          <div class="media-body">
            <h5 class="mt-0">Commenter Name</h5>
            Cras sit amet nibh libero, in gravida nulla. Nulla vel metus scelerisque ante sollicitudin. Cras purus odio, vestibulum in vulputate at, tempus viverra turpis. Fusce condimentum nunc ac nisi vulputate fringilla. Donec lacinia congue felis in faucibus.
          </div>
        </div> -->

          </div>
        </div>

    
<script>
  //Copy Link on Click
  const copiedLinks = document.querySelectorAll(".copy-link");
  const copiedMsgs = document.querySelectorAll(".copy-msg");
  const links = Array.from(copiedLinks);
  const msgs = Array.from(copiedMsgs);
  links.forEach((link) => {
    link.addEventListener("click", (e) => {
      window.navigator.clipboard.writeText(window.location.href);
      link.previousElementSibling.style.display = "block";
      setTimeout(() => {
        link.previousElementSibling.style.display = "none";
      }, 2000);
    });
  });
</script>
</body>
</html>
